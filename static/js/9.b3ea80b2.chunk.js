(window.webpackJsonp_tools=window.webpackJsonp_tools||[]).push([[9],{316:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));n(378);var r=n(400),a=n.n(r),o=(n(355),n(357)),c=n.n(o),u=(n(94),n(75)),i=n.n(u),s=n(49),l=n.n(s),d=n(73),f=n(92),p=n(54),m=(n(151),n(74)),b=n.n(m),v=n(65),h=(n(392),n(395)),g=n.n(h),j=n(0),y=n.n(j),O=(n(660),{icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"}),w=n(119),k=function(e,t){return j.createElement(w.a,Object.assign({},e,{ref:t,icon:O}))};k.displayName="InboxOutlined";var N,E,x=j.forwardRef(k),S=n(325),P=n(356),C=n.n(P),z=n(327),L=[{title:"\u9884\u89c8",width:"150px",dataIndex:"thumbUrl",align:"center",render:function(e){return y.a.createElement("img",{height:"100",src:e,alt:e})}},{title:"\u56fe\u7247\u94fe\u63a5",dataIndex:"url"},{title:"\u64cd\u4f5c",width:"200px",align:"center",dataIndex:"url",fixed:"right",render:function(e){return y.a.createElement(y.a.Fragment,null,y.a.createElement("a",{href:e,target:"_blank",rel:"noreferrer noopener"},"\u67e5\u770b\u5927\u56fe"),y.a.createElement("a",{style:{marginLeft:"10px"},onClick:function(){C()(e),b.a.success("\u590d\u5236\u6210\u529f: "+e)}},"\u590d\u5236\u94fe\u63a5"))}}],D=n(76),M=g.a.Dragger,T=!1;function J(){var e=Object(j.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],o=Object(j.useState)(!1),u=Object(v.a)(o,2),s=u[0],m=u[1],h=Object(j.useState)([]),g=Object(v.a)(h,2),O=g[0],w=g[1],k=Object(j.useState)(0),P=Object(v.a)(k,2),J=P[0],_=P[1],I=Object(j.useState)(""),U=Object(v.a)(I,2),A=U[0],R=U[1],F=Object(j.useState)([]),H=Object(v.a)(F,2),K=H[0],V=H[1],B=Object(j.useCallback)((function(e){var t=Object(D.b)(e);if(!t)return b.a.error("\u83b7\u53d6\u526a\u8d34\u677f\u56fe\u7247\u5931\u8d25");var n=(new Date).getTime(),r="from-clipboard-".concat(n);Object.assign(t,{uid:r});var a={lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:n+".png",size:t.size,type:t.type,percent:0,uid:r,originFileObj:t};q([a])}),[]);Object(j.useEffect)((function(){return Object(S.j)({dbName:"tools_cdn_img_config",storeName:["upload_commit"],storeOption:{keyPath:"key",autoIncrement:!0}}).then((function(e){E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageNum:1,pageSize:10};return Object(S.e)(Object(p.a)({db:e,storeName:"upload_commit"},t))},N={add:function(t){return Object(S.a)({db:e,storeName:"upload_commit",data:t})}}})),document.addEventListener("paste",B),function(){return document.removeEventListener("paste",B)}}),[]);var $=function(e){return function(t){var n=t.url,r=void 0===n?"":n;if(!r)return!0;if("preview"===e)C()(r),b.a.success("\u590d\u5236\u6210\u529f: "+r);else if("look"===e)return window.open(r),Promise.resolve(!1)}},q=function(e){if(T)return!1;T=!0;var t=new FormData;e.forEach((function(e){var n=e.originFileObj,r=e.name,a=e.uid;e.url||t.append("files",n,r+"."+a)})),z.a.cdn.upload({},t).then((function(t){if(t&&t.length>0){var n={};t.forEach((function(e){return n[e.uid]=e})),e.forEach((function(e){var t=n[e.uid];t&&(e.status="success",e.url=t.url,1===t.exists&&b.a.info(y.a.createElement("span",null,"CDN\u5df2\u5b58\u5728: ",y.a.createElement("a",{href:t.url},t.url)),10),setTimeout((function(){N&&N.add({url:t.url,thumbUrl:e.thumbUrl})}),100))})),t.filter((function(e){return 1!==e.exists})).length>0&&b.a.success("\u4e0a\u4f20\u6210\u529f"),V(e)}})).catch((function(t){var n="\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5";e.forEach((function(e){e.status="error",e.error=n})),V(e),b.a.error(n),console.error(t)})).finally((function(){T=!1}))},Q=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,o,c,u=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:1,e.next=3,E({pageNum:Object(S.i)(t)?t:1});case 3:n=e.sent,a=(r=n||{}).data,o=void 0===a?[]:a,c=r.total,w(o),m(!0),_(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y.a.createElement("div",{className:"cdn-content"},y.a.createElement("div",{className:"cdn-content-upload-wrap"},y.a.createElement("div",{className:"cdn-content-upload"},y.a.createElement(M,{className:"cdn-content-upload-drag",name:"file",multiple:!0,action:"/upload",fileList:K,beforeUpload:function(e){return e.status="uploading",V([].concat(Object(f.a)(K),[e])),!1},onChange:function(e){var t=e.fileList;console.log(e),q(t)},listType:"picture",showUploadList:{showRemoveIcon:!0,removeIcon:function(e){return e.error?"\u5220\u9664":e.url?y.a.createElement("div",null,y.a.createElement("span",{onClick:function(t){t.stopPropagation(),$("preview")(e)}},"\u590d\u5236\u94fe\u63a5"),y.a.createElement("span",{style:{marginLeft:10}},"\u67e5\u770b")):" "}},onRemove:$("look"),onPreview:$("preview")},y.a.createElement(x,{className:"cdn-content-upload-drag-icon"}),y.a.createElement("p",{className:"cdn-content-upload-drag-text"},"\u70b9\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u8be5\u533a\u57df\u4e0a\u4f20\u6587\u4ef6"),y.a.createElement("p",{className:"cdn-content-upload-drag-hint"},"\u652f\u6301 ",y.a.createElement("span",{style:{color:"red",fontStyle:"italic"}},"\u5c4f\u5e55\u622a\u56fe")," \u5728\u6b64\u7c98\u8d34\u4e0a\u4f20",y.a.createElement("br",null),"\u652f\u6301\u5355\u6b21\u3001\u6279\u91cf\u4e0a\u4f20\u81f3CDN",y.a.createElement("br",null),"\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u51e0\u5206\u949fCDN\u66f4\u65b0")))),y.a.createElement("div",{className:"option-btn"},y.a.createElement(i.a,{className:"btn",type:"primary",onClick:Q},"\u4e0a\u4f20\u8bb0\u5f55"),y.a.createElement(i.a,{className:"btn",type:"primary",onClick:function(){z.a.cdn.post({type:"log"},{}).then((function(e){var t=e.content;R(t),r(!0)}))}},"\u65e5\u5fd7")),y.a.createElement(c.a,{className:"cdn-upload-modal",footer:!1,visible:n,onCancel:function(){return r(!1)}},y.a.createElement("div",{className:"log-content"},A)),y.a.createElement(c.a,{title:"\u4e0a\u4f20\u8bb0\u5f55",width:"80%",destroyOnClose:!0,visible:s,footer:null,onCancel:function(){return m(!1)}},y.a.createElement(a.a,{scroll:{x:"100%"},rowKey:"key",dataSource:O,columns:L,pagination:{total:J,onChange:Q}})))}},325:function(e,t,n){"use strict";function r(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"n",(function(){return j})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return O})),n.d(t,"e",(function(){return k})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return E})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"m",(function(){return z})),n.d(t,"c",(function(){return L}));var a=n(336),o=n.n(a),c=function(e){console.error(e)},u=new Map,i=o.a.create({timeout:5e3});i.interceptors.request.use((function(e){var t=r("token");return t&&(e.headers.token=t),e.withCredentials=!0,e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e.status&&200==e.status?Promise.resolve(e.data):(function(e){var t=e.message;switch(e.code){case 1:t=t||"\u64cd\u4f5c\u5931\u8d25";break;case 401001:t=t||"token\u4e3a\u7a7a";break;case 401002:t=t||"token\u672a\u7ecf\u6388\u6743";break;case 401003:t=t||"\u7ecf\u7eaa\u4eba\u6ca1\u6709\u4e70\u5546\u4e1a\u5957\u9910";break;case 400001:t=t||"from\u5b57\u6bb5\u7a7a";break;case 401004:t=t||"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6682\u65e0\u67e5\u770b\u6743\u9650\u3002";break;case 401005:t=t||"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u65e0\u8ba4\u9886\u6743\u9650\uff0c\u6682\u65f6\u65e0\u6cd5\u64cd\u4f5c";break;case 500:t=t||"\u670d\u52a1\u5f02\u5e38"}u.has(e.code)||(u.set(e.code,{code:e.code,message:t}),console.log("modalQueueMap:",u),406==e.code?console.warn(t):(console.error(t),u.delete(e.code)))}(e.data),Promise.reject(e))}),(function(e){var t=e.response;return t?(function(e,t){switch(e){case 401:break;case 403:c("\u767b\u5f55\u8fc7\u671f, \u8bf7\u91cd\u65b0\u767b\u5f55");break;case 404:c("\u8bf7\u6c42\u4e0d\u5b58\u5728!");break;default:console.log(t)}}(t.status,t.data.message),Promise.reject(t)):window.navigator.onLine?Promise.reject(e):void 0}));new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");var s=function(e){return"number"===typeof e},l=function(e){return"[object Object]"===Object.prototype.toString.call(e)},d=function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=n(92),p=n(49),m=n.n(p),b=n(73),v=function(e,t,n){var r=e.transaction([t],n);return r.onerror=function(e){console.warn(e)},r},h=function(e){var t=e.dbName,n=e.version,r=void 0===n?1:n,a=e.storeName,o=void 0===a?[""]:a,c=e.storeOption,u=void 0===c?{autoIncrement:!0}:c;return new Promise((function(e,n){var a;t||n("db name shoudle be string");var c=window.indexedDB.open(t,r);c.onerror=function(e){console.warn("open db fail:",e),n(e)},c.onsuccess=function(t){a=c.result,e(a)},c.onupgradeneeded=function(e){a=e.target.result,o.forEach((function(e){a.objectStoreNames.contains(e)||a.createObjectStore(e,u)}))}}))},g=function(e){var t=e.db,n=e.storeName,r=e.data,a=void 0===r?{}:r;return new Promise((function(e,r){t||r("db is null"),n||r("storeName is null");var o=v(t,n,"readwrite").objectStore(n).add(a);o.onsuccess=function(t){e(t)},o.onerror=function(e){console.warn("new data fail"),r(e)}}))},j=function(e){var t=e.db,n=e.storeName,r=e.data,a=void 0===r?{}:r;return new Promise(function(){var e=Object(b.a)(m.a.mark((function e(r,o){var c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||o("db is null"),n||o("storeName is null"),e.next=4,y({db:t,storeName:n,key:a.key});case 4:c=e.sent,(u=v(t,n,"readwrite").objectStore(n)[c?"put":"add"](a)).onsuccess=function(e){r(e)},u.onerror=function(e){console.warn("update data fail"),o(e)};case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},y=function(e){var t=e.db,n=e.storeName,r=e.key,a=e.type,o=void 0===a?"get":a;return new Promise((function(e,a){t||a("db is null"),n||a("storeName is null");var c=v(t,n).objectStore(n),u="getAll"===o?c.getAll():c.get(r);u.onerror=function(e){console.warn("read data fail"),a(e)},u.onsuccess=function(t){u.result?e(u.result):e(void 0)}}))},O=function(e){var t=e.db,n=e.storeName,r=e.key;return new Promise((function(e,a){t||a("db is null"),n||a("storeName is null");var o=v(t,n,"readwrite").objectStore(n).delete(r);o.onsuccess=function(t){e(t)},o.onerror=function(e){console.warn("remove data fail"),a(e)}}))},w=function(e){var t=e.db,n=e.storeName;return new Promise((function(e,r){t||r("db is null"),n||r("storeName is null");var a=v(t,n).objectStore(n).getAllKeys();a.onsuccess=function(t){e(a.result)},a.onerror=function(e){console.warn("get all keys fail"),r(e)}}))},k=function(e){var t=e.db,n=e.storeName,r=e.pageNum,a=e.pageSize,o=void 0===a?10:a;return new Promise(function(){var e=Object(b.a)(m.a.mark((function e(a,c){var u,i,s,l,d,p,b,h,g,j,y,O,k,N;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||c("db is null"),n||c("storeName is null"),e.next=4,w({db:t,storeName:n});case 4:if(!((u=e.sent).length<1)){e.next=8;break}return a({code:0,data:[],total:0}),e.abrupt("return");case 8:for(i=v(t,n,"readonly"),s=i.objectStore(n),l=o||10,d=[],p=u.reverse(),b=0,h=p.length;b<h;b+=l)d.push(p.slice(b,b+l));g=d[(r||1)-1],j=Math.min.apply(Math,Object(f.a)(g)),y=Math.max.apply(Math,Object(f.a)(g)),O=IDBKeyRange.bound(j,y),k=[],(N=s.openCursor(O)).onsuccess=function(e){var t=e.target.result;t?(k.push(t.value),t.continue()):a({code:0,total:u.length,data:k.reverse()})},N.onerror=function(e){console.warn("read data fail"),c({code:1,error:e})};case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},N=function(e){if(!e)return e;var t=null;try{t=JSON.parse(e.replace(/(?:\s*['"]*)?([a-zA-Z0-9_-]+)(?:['"]*\s*)?:/g,'"$1":'))}catch(n){console.log(n)}return t?JSON.stringify(t,null,4):e},E=function(e){try{return l(JSON.parse(e))}catch(t){return!1}},x=function(e){if(!e)return{};var t={};return Object.keys(e).forEach((function(n){null!==e[n]&&void 0!==e[n]&&(t[n]=e[n])})),t},S=function(e,t,n){for(var r=[],a=0,o=e.length;a<o;a+=t){var c=e.slice(a,a+t);n&&c.length<t&&c.push.apply(c,Object(f.a)(new Array(t-c.length).fill(n))),r.push(c)}return r};var P=n(327),C=function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("key should be not null"),e.abrupt("return",Promise.reject());case 3:return e.prev=3,e.next=6,P.a.redis.get({type:"get",key:t},{});case 6:return n=e.sent,e.abrupt("return","string"===typeof n?JSON.parse(n):n);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("key should be not null"),e.abrupt("return",Promise.reject());case 3:if(n){e.next=6;break}return console.error("val should be not null"),e.abrupt("return",Promise.reject());case 6:return r=l(n)||d(n)?JSON.stringify(n):n.toString(),e.prev=7,e.abrupt("return",P.a.redis.post({type:"set"},{data:{key:t,val:r}}));case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}}),e,null,[[7,11]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("key should be not null"),e.abrupt("return",Promise.reject());case 3:return e.prev=3,e.abrupt("return",P.a.redis.get({type:"exists",key:t}));case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}()},327:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(56),a=(n(151),n(74)),o=n.n(a),c=n(54),u=(n(337),n(325)),i=[0],s={headers:{"Content-Type":"application/json;charset=UTF-8"}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object(c.a)(Object(c.a)({},s),t)).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json().then(void 0,(function(){return Promise.resolve("")}))})).then((function(e){var n=e.config,r=void 0===n?{}:n,a=e.code,c=e.msg,u=r.dataKey,s=void 0===u?"data":u,l=t.directReturn;return void 0!==l&&l?Promise.resolve(e):401===a?Promise.reject(e):i.indexOf(a)>-1?Promise.resolve(e[s]||{}):(o.a.error(c||"\u7cfb\u7edf\u5f02\u5e38"),Promise.reject(e))})).catch((function(e){throw e}))},d=function(e,t){if(!t)return e.replace(/\/:[^?]+/g,"");var n=new URLSearchParams,r=Object.keys(t).reduce((function(e,r){return e.includes(":"+r)?e.replace(":"+r,t[r]):(t[r]&&t[r].constructor===Array?t[r].forEach((function(e){n.append(r,e)})):n.append(r,t[r]),e)}),e);return(r=r.replace(/\/:[^?]+/g,""))+(""===n.toString()?"":"?"+n)},f=function e(t){var n=this;Object(r.a)(this,e),this.url="",this.get=function(e,t,r){return l(d(n.url,Object(c.a)(Object(c.a)({},e),t)),r)},this.post=function(e,t,r){return l(d(n.url,e),Object(c.a)(Object(c.a)({},r),{},{method:"POST",body:JSON.stringify(Object(u.d)(t))}))},this.upload=function(e,t){return l(d(n.url,e),{method:"POST",isUpoad:!0,body:t})},this.delete=function(e,t){return l(d(n.url,e),Object(c.a)(Object(c.a)({},t),{},{method:"DELETE"}))},this.put=function(e,t,r){return l(d(n.url,e),Object(c.a)(Object(c.a)({},r),{},{method:"PUT",body:JSON.stringify(Object(u.d)(t))}))},this.patch=function(e,t,r){return l(d(n.url,e),Object(c.a)(Object(c.a)({},r),{},{method:"PATCH",body:JSON.stringify(Object(u.d)(t))}))},this.url=t},p=function(e){return new f(e)},m={cdn:p("".concat("").concat("","/upload/:type")),url:p("".concat("").concat("","/url/:type")),redis:p("".concat("").concat("","/redis/:type")),doc:p("".concat("").concat("","/:type")),directFetch:p(":type")}},660:function(e,t,n){}}]);
//# sourceMappingURL=9.b3ea80b2.chunk.js.map