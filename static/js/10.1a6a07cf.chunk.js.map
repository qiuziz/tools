{"version":3,"sources":["pages/document/index.tsx","utils/cookie.ts","utils/http.ts","utils/is-type.tsx","utils/indexdb.ts","utils/tool.ts","utils/redis.ts","service/fetch.ts","service/resource-api.ts"],"names":["Doc","useState","md","setMd","name","useRouterParams","useEffect","Resource","doc","get","type","then","res","className","remarkPlugins","gfm","children","getCookie","cname","ca","document","cookie","split","i","length","c","trim","indexOf","substring","tip","msg","console","error","modalQueueMap","Map","instance","Axios","create","timeout","interceptors","request","use","config","token","headers","withCredentials","Promise","reject","response","status","resolve","data","resData","message","code","has","set","log","warn","delete","codeErrorHandle","other","netErrorHandle","window","navigator","onLine","RegExp","isNumber","value","isObject","Object","prototype","toString","call","isArray","getTransaction","db","storeName","mode","transaction","onerror","ev","openDB","dbName","version","storeOption","autoIncrement","indexedDB","open","event","onsuccess","result","onupgradeneeded","target","forEach","objectStoreNames","contains","createObjectStore","addStore","objectStore","add","updateStore","a","readStore","key","getAll","undefined","removeStore","getAllKeys","getDataByPage","pageNum","pageSize","allKeys","total","count","keysList","allKeysReverse","reverse","len","push","slice","currentKeys","start","Math","min","end","max","boundKeyRange","IDBKeyRange","bound","rowData","openCursor","cursor","continue","handleJsonStr","str","json","JSON","parse","replace","stringify","isJson","e","filterObjectEmptyValue","keys","arrayGroup","array","subGroupLength","fillItem","reslut","group","Array","fill","getRedis","redis","setRedis","val","post","existRedis","successCode","HEADER","fetchMethod","_url","_config","fetch","ok","Error","statusText","dataKey","directReturn","catch","err","matchUrlSearchParams","url","urlSearchParams","u","URLSearchParams","reduce","pre","next","includes","constructor","append","FetchApi","bodyParams","method","body","upload","isUpoad","put","patch","this","Http","cdn","HttpResource","directFetch"],"mappings":"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","file":"static/js/10.1a6a07cf.chunk.js","sourcesContent":["/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-24 18:39:02\n * @Last Modified by: qiuz\n */\n\nimport { useRouterParams } from 'hooks';\nimport React, { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport { Resource } from 'service';\nimport './index.less';\n\nexport default function Doc() {\n\n  const [md, setMd] = useState('');\n\n  const { name } = useRouterParams();\n\n  useEffect(() => {\n    Resource.doc.get({type: name}).then((res: any) => {\n      setMd(res);\n    });\n  }, []);\n\n  return (\n    <div className=\"doc-content\">\n      <ReactMarkdown remarkPlugins={[gfm]} children={md} />\n    </div>\n  );\n}\n","function setCookie(cname: any, cvalue: any, exdays: any) {\n  var d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  var expires = 'expires=' + d.toUTCString();\n  document.cookie = cname + '=' + cvalue + '; ' + expires;\n}\nfunction getCookie(cname: any) {\n  var name = cname + '=';\n  var ca = document.cookie.split(';');\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i].trim();\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return '';\n}\n\nfunction checkCookie(cname: any, cookie: any, exdays: number) {\n  let user = getCookie(cname);\n  if (user != '') {\n    setCookie('token', '', exdays);\n  } else {\n    setCookie('token', cookie, exdays);\n  }\n}\nexport { setCookie, getCookie, checkCookie };\n","import Axios from 'axios';\nimport { getCookie } from '../utils/cookie';\n\nconst tip = (msg: string) => {\n  console.error(msg);\n};\n\nconst modalQueueMap = new Map();\n\n//接口返回正常,状态异常\nconst codeErrorHandle = (resData: { message: any; code: number }) => {\n  let message = resData.message;\n  switch (resData.code) {\n    case 1:\n      message = message || '操作失败';\n      break;\n    case 401001:\n      message = message || 'token为空';\n      break;\n    case 401002:\n      message = message || 'token未经授权';\n      break;\n    case 401003:\n      message = message || '经纪人没有买商业套餐';\n      break;\n    case 400001:\n      message = message || 'from字段空';\n      break;\n    case 401004:\n      message = message || '对不起，您暂无查看权限。';\n      break;\n    case 401005:\n      message = message || '对不起，您无认领权限，暂时无法操作';\n      break;\n    case 500:\n      message = message || '服务异常';\n      break;\n    default:\n    //token过期\n    // case 403:\n    //   message = '登录过期, 请重新登录';\n    //   break;\n    // case 406:\n    //   message = '对不起，暂无业主房源';\n    //   break;\n    //console.log('default:', resData);\n  }\n\n  //存在对应状态码\n  if (modalQueueMap.has(resData.code)) return;\n\n  //不存在对应状态码\n  modalQueueMap.set(resData.code, {\n    code: resData.code,\n    message: message\n  });\n\n  console.log('modalQueueMap:', modalQueueMap);\n\n  if (resData.code == 406) {\n    console.warn(message);\n    //modalQueueMap.delete(resData.code);\n  } else {\n    console.error(message);\n    modalQueueMap.delete(resData.code);\n  }\n};\n\n//请求失败后的错误统一处理\nconst netErrorHandle = (status: any, other: any) => {\n  switch (status) {\n    //未登录，去登录\n    case 401:\n      // toLogin();\n      break;\n    case 403:\n      tip('登录过期, 请重新登录');\n      // setTimeout(() => {\n      //   toLogin();\n      // }, 1000);\n      break;\n    case 404:\n      tip('请求不存在!');\n      break;\n    default:\n      console.log(other);\n  }\n};\n\n//创建axios实例\nconst instance = Axios.create({ timeout: 5000 });\n\n/**\n * 请求拦截器\n * 每次请求前，如果存在token则在请求头中携带token\n */\n\ninstance.interceptors.request.use(\n  (config) => {\n    // let token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxODg1NzM4MzMzMyJ9.GWnwqses61dKzz5KrOHApOoD0Bc4o1f6KLyGE4soj7U';//获取token\n    let token = getCookie('token');\n    token && (config.headers.token = token);\n    config.withCredentials = true;\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n/**\n * 响应拦截器\n * 拦截响应并统一处理\n */\n\ninstance.interceptors.response.use(\n  (res: any) => {\n    if (res.status && res.status == 200) {\n      return Promise.resolve(res.data);\n    } else {\n      codeErrorHandle(res.data);\n      return Promise.reject(res);\n    }\n  },\n  (error: any) => {\n    const { response } = error;\n    if (response) {\n      netErrorHandle(response.status, response.data.message);\n      return Promise.reject(response);\n    } else {\n      //断网情况处理\n      if (!window.navigator.onLine) {\n        //通知断网\n      } else {\n        return Promise.reject(error);\n      }\n    }\n  }\n);\n\nexport default instance;\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2018-12-11 11:27:12\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-19 23:29:29\n */\n\nconst pattern = {\n  // http://emailregex.com/\n  // eslint-disable-next-line no-useless-escape\n  email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n  // eslint-disable-next-line prefer-regex-literals\n  url: new RegExp(\n    '^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$',\n    'i'\n  ),\n  hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i\n};\n\nexport const isNumber = (value: any) => {\n  return typeof value === 'number';\n};\n\nexport const isRegExp = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object RegExp]';\n};\n\nexport const isObject = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Object]';\n};\n\nexport const isError = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Error]';\n};\n\nexport const isString = (value: any) => {\n  return typeof value === 'string';\n};\n\nexport const isFunction = (value: any) => {\n  return typeof value === 'function';\n};\n\nexport const isArray = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Array]';\n};\n\nexport const isEmptyObject = (obj: any) => {\n  if (obj === null || obj === undefined) return 'Cannot convert undefined or null to object';\n  return Object.keys(obj).length === 0;\n};\n\nexport const isBoolean = (value: any) => {\n  return (\n    value === true ||\n    value === false ||\n    (isObject(value) && Object.prototype.toString.call(value) === '[object Boolean]')\n  );\n};\n\nexport const isInteger = (value: any) => {\n  return isNumber(value) && parseInt(value, 10) === value;\n};\nexport const isFloat = (value: any) => {\n  return isNumber(value) && !isInteger(value);\n};\n\nexport const isDate = (value: any) => {\n  if (!value) return false;\n  return (\n    typeof value.getTime === 'function' &&\n    typeof value.getMonth === 'function' &&\n    typeof value.getYear === 'function'\n  );\n};\n\nexport const isEmail = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.email) && value.length < 255;\n};\n\nexport const isUrl = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.url);\n};\n\nexport const isHex = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.hex);\n};\n\nexport const isPromise = (value: any) => {\n  return value && typeof value.then === 'function';\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-02-05 23:39:57\n * @Last Modified by: qiuz\n */\n\nconst getTransaction = (db: IDBDatabase, storeName: string, mode?: IDBTransactionMode) => {\n  const res = db.transaction([storeName], mode);\n  res.onerror = (ev) => {\n    console.warn(ev);\n  };\n  return res;\n};\n\nexport const openDB = ({\n  dbName,\n  version = 1,\n  storeName = [''],\n  storeOption = { autoIncrement: true }\n}: {\n  dbName: string;\n  version?: number;\n  storeName?: string[];\n  storeOption?: IDBObjectStoreParameters;\n}): Promise<IDBDatabase> =>\n  new Promise((resolve, reject) => {\n    let db: IDBDatabase;\n    if (!dbName) reject('db name shoudle be string');\n\n    const request = window.indexedDB.open(dbName, version);\n\n    request.onerror = function (event) {\n      console.warn('open db fail:', event);\n      reject(event);\n    };\n\n    request.onsuccess = function (event) {\n      db = request.result;\n      resolve(db);\n    };\n\n    request.onupgradeneeded = function (event: any) {\n      db = event.target.result;\n      let objectStore;\n      storeName.forEach((name: string) => {\n        if (!db.objectStoreNames.contains(name)) {\n          objectStore = db.createObjectStore(name, storeOption);\n        }\n      });\n    };\n  });\n\nexport const addStore = ({\n  db,\n  storeName,\n  data = {}\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  data: any;\n}) =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const request = getTransaction(db, storeName, 'readwrite').objectStore(storeName).add(data);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n\n    request.onerror = function (event) {\n      console.warn('new data fail');\n      reject(event);\n    };\n  });\n\nexport const updateStore = ({\n  db,\n  storeName,\n  data = {}\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  data: any;\n}) =>\n  new Promise(async (resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const res = await readStore({ db, storeName, key: data.key });\n    const request = getTransaction(db, storeName, 'readwrite')\n      .objectStore(storeName)\n      [res ? 'put' : 'add'](data);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n\n    request.onerror = function (event) {\n      console.warn('update data fail');\n      reject(event);\n    };\n  });\n\nexport const readStore = ({\n  db,\n  storeName,\n  key,\n  type = 'get'\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  key?: string | number;\n  type?: 'get' | 'getAll';\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName);\n    const objectStore = transaction.objectStore(storeName);\n    const request =\n      type === 'getAll' ? objectStore.getAll() : objectStore.get(key as string | number);\n\n    request.onerror = function (event) {\n      console.warn('read data fail');\n      reject(event);\n    };\n\n    request.onsuccess = function (event) {\n      if (request.result) {\n        resolve(request.result);\n      } else {\n        resolve(undefined);\n      }\n    };\n  });\n\nexport const removeStore = ({\n  db,\n  storeName,\n  key\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  key?: string | number;\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName, 'readwrite');\n    const objectStore = transaction.objectStore(storeName);\n    const request = objectStore.delete(key as string | number);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n    request.onerror = function (event) {\n      console.warn('remove data fail');\n      reject(event);\n    };\n  });\n\nexport const getAllKeys = ({\n  db,\n  storeName\n}: {\n  db: IDBDatabase;\n  storeName: string;\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName);\n    const objectStore = transaction.objectStore(storeName);\n    const request = objectStore.getAllKeys();\n\n    request.onsuccess = function (event) {\n      resolve(request.result);\n    };\n    request.onerror = function (event) {\n      console.warn('get all keys fail');\n      reject(event);\n    };\n  });\n\nexport type PageData = {\n  code: number;\n  total: number;\n  data: any[];\n};\n\nexport const getDataByPage = ({\n  db,\n  storeName,\n  pageNum,\n  pageSize = 10\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  pageNum: number;\n  pageSize?: number;\n}): Promise<PageData> =>\n  new Promise(async (resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const allKeys: any[] = await getAllKeys({ db, storeName });\n    if (allKeys.length < 1) {\n      resolve({ code: 0, data: [], total: 0 });\n      return;\n    }\n    const transaction = getTransaction(db, storeName, 'readonly');\n    const objectStore = transaction.objectStore(storeName);\n    const count = pageSize || 10;\n    let keysList = [];\n    const allKeysReverse = allKeys.reverse();\n    for (let i = 0, len = allKeysReverse.length; i < len; i += count) {\n      keysList.push(allKeysReverse.slice(i, i + count));\n    }\n    const currentKeys = keysList[(pageNum || 1) - 1];\n    const start = Math.min(...currentKeys);\n    const end = Math.max(...currentKeys);\n    const boundKeyRange = IDBKeyRange.bound(start, end);\n    const rowData: any[] = [];\n    const request = objectStore.openCursor(boundKeyRange);\n    request.onsuccess = function (event: any) {\n      const cursor = event.target.result;\n      if (!cursor) {\n        resolve({ code: 0, total: allKeys.length, data: rowData.reverse() });\n        return;\n      }\n      rowData.push(cursor.value);\n      cursor.continue();\n    };\n    request.onerror = function (event) {\n      console.warn('read data fail');\n      reject({ code: 1, error: event });\n    };\n  });\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-02-23 22:57:35\n * @Last Modified by: qiuz\n */\n\nimport { isObject } from './is-type';\n\n/**\n * JSON字符串格式化，若解析失败返回原数据\n * @param str\n * @returns JSON String | str\n */\nexport const handleJsonStr = (str: string) => {\n  if (!str) return str;\n  let json = null;\n  try {\n    json = JSON.parse(str.replace(/(?:\\s*['\"]*)?([a-zA-Z0-9_-]+)(?:['\"]*\\s*)?:/g, '\"$1\":'));\n  } catch (error) {\n    console.log(error);\n  }\n  return json ? JSON.stringify(json, null, 4) : str;\n};\n\nexport const isJson = (str: string) => {\n  try {\n    return isObject(JSON.parse(str));\n  } catch (e) {\n    return false;\n  }\n};\n\nconst IS_SETUPED_SCRIPT: string[] = [];\nexport const setupScript = (src: string, crossorigin = ''): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    if (IS_SETUPED_SCRIPT.indexOf(src) > -1) {\n      resolve();\n      return;\n    }\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src;\n    script.crossOrigin = crossorigin;\n    script.onerror = (err: any) => {\n      console.log(err);\n      document.body.removeChild(script);\n      reject(new URIError(`The Script ${src} is no accessible.`));\n    };\n    script.onload = () => {\n      IS_SETUPED_SCRIPT.push(src);\n      resolve();\n    };\n    document.body.appendChild(script);\n  });\n};\n\nexport const filterObjectEmptyValue = (data: object | undefined) => {\n  if (!data) return {};\n  const result = {};\n  Object.keys(data).forEach((key: string) => {\n    data[key] !== null && data[key] !== undefined && (result[key] = data[key]);\n  });\n  return result;\n};\n\n/**\n * @description 数组切割分组\n * @param array\n * @param subGroupLength\n */\n export const arrayGroup = (array: any[], subGroupLength: number, fillItem?: any): any[] => {\n  const reslut = [];\n  for (let i = 0, len = array.length; i < len; i += subGroupLength) {\n    const group = array.slice(i, i + subGroupLength);\n    if (fillItem && group.length < subGroupLength) {\n      group.push(...new Array(subGroupLength - group.length).fill(fillItem));\n    }\n    reslut.push(group);\n  }\n  return reslut;\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-06-08 00:01:12\n * @Last Modified by: qiuz\n */\n\nimport { Resource } from 'service';\nimport { isArray, isObject, isString } from './is-type';\n\nexport const getRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    const res: any = await Resource.redis.get({ type: 'get', key }, {});\n    return isString(res) ? JSON.parse(res) : res;\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const setRedis = async (key: string, value: any): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  if (!value) {\n    console.error('val should be not null');\n    return Promise.reject();\n  }\n  const val = isObject(value) || isArray(value) ? JSON.stringify(value) : value.toString();\n  try {\n    return Resource.redis.post({ type: 'set' }, { data: { key, val } });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const delRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    return Resource.redis.get({ type: 'get', key });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const existRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    return Resource.redis.get({ type: 'exists', key });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2018-11-02 14:38:52\n * @Last Modified by: qiuz\n * @Last Modified time: 2022-02-26 18:00:42\n */\n\nimport 'whatwg-fetch';\nimport { filterObjectEmptyValue } from 'utils';\nimport { message as antdMsg } from 'antd';\n\nconst successCode = [0];\nconst exitFn = () => {\n  // const redirectTo = window.location.href;\n  // jump(`/admin/login?redirectTo=${encodeURIComponent(redirectTo)}`, { redirect: true });\n};\ninterface ConfigType {\n  loadingDelay?: number;\n  des?: boolean;\n  [propName: string]: any;\n}\n\nconst HEADER: any = {\n  headers: {\n    'Content-Type': 'application/json;charset=UTF-8'\n  }\n};\n\nconst fetchMethod = (_url: string, _config: any = {}) => {\n  return fetch(_url, { ...HEADER, ..._config })\n    .then((response) => {\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      return response.json().then(undefined, () => Promise.resolve(''));\n    })\n    .then((res: any) => {\n      const { config = {}, code, msg } = res;\n      const { dataKey = 'data' } = config;\n      const { directReturn = false } = _config;\n      if (directReturn) {\n        return Promise.resolve(res);\n      }\n      if (code === 401) {\n        exitFn();\n        return Promise.reject(res);\n      }\n      if (successCode.indexOf(code) > -1) {\n        return Promise.resolve(res[dataKey] || {});\n      }\n      antdMsg.error(msg || '系统异常');\n      return Promise.reject(res);\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nconst matchUrlSearchParams = (url: string, urlSearchParams: any) => {\n  if (!urlSearchParams) {\n    return url.replace(/\\/:[^?]+/g, '');\n  }\n  const u = new URLSearchParams();\n  // tslint:disable-next-line:variable-name\n  let _url = Object.keys(urlSearchParams).reduce((pre, next) => {\n    if (pre.includes(':' + next)) {\n      return pre.replace(':' + next, urlSearchParams[next]);\n    } else {\n      if (urlSearchParams[next] && urlSearchParams[next].constructor === Array) {\n        urlSearchParams[next].forEach((value: any) => {\n          u.append(next, value);\n        });\n      } else {\n        u.append(next, urlSearchParams[next]);\n      }\n      return pre;\n    }\n  }, url);\n  // let u = toQueryString(urlSearchParams);\n  _url = _url.replace(/\\/:[^?]+/g, '');\n  return _url + (u.toString() === '' ? '' : '?' + u);\n};\n\nclass FetchApi {\n  url = '';\n\n  constructor(_url: string) {\n    this.url = _url;\n  }\n\n  get = (urlSearchParams: object, bodyParams?: object, config?: ConfigType) => {\n    return fetchMethod(\n      matchUrlSearchParams(this.url, { ...urlSearchParams, ...bodyParams }),\n      config\n    );\n  };\n\n  post = (urlSearchParams?: object, bodyParams?: any, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'POST',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n\n  upload = (urlSearchParams: object, bodyParams: FormData) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      method: 'POST',\n      isUpoad: true,\n      body: bodyParams\n    });\n  };\n\n  delete = (urlSearchParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'DELETE'\n    });\n  };\n\n  put = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'PUT',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n\n  patch = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'PATCH',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n}\n\nconst Http = (url: string) => {\n  return new FetchApi(url);\n};\n\nexport default Http;\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-19 22:21:24\n * @Last Modified by: qiuz\n */\n\nimport HttpResource from './fetch';\n\nconst API_HOST = '';\n\nconst prefix = process.env.NODE_ENV === 'development' ? '' : '';\n\nexport const Resource = {\n  /**\n   * 上传\n   */\n  cdn: HttpResource(`${API_HOST}${prefix}/upload/:type`),\n  url: HttpResource(`${API_HOST}${prefix}/url/:type`),\n  /**\n   * redis\n   */\n  redis: HttpResource(`${API_HOST}${prefix}/redis/:type`),\n\n  /**\n   * doc\n   */\n  doc: HttpResource(`${API_HOST}${prefix}/:type`),\n\n  /**\n   * direct fetch\n   */\n  directFetch: HttpResource(`:type`)\n};\n"],"sourceRoot":""}