{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js","pages/cdn-upload/index.tsx","pages/cdn-upload/constant.tsx","utils/cookie.ts","utils/http.ts","utils/is-type.tsx","utils/indexdb.ts","utils/tool.ts","utils/redis.ts","service/fetch.ts","service/resource-api.ts"],"names":["InboxOutlined","props","ref","React","AntdIcon","Object","assign","icon","InboxOutlinedSvg","displayName","uploadStore","getUploadCommitList","columns","title","width","dataIndex","align","render","value","height","src","alt","fixed","href","target","rel","style","marginLeft","onClick","copy","success","Dragger","loading","CDNImgUpload","useState","visible","setVisible","historyModal","setHistoryModal","uploadList","setUploadList","total","setTotal","log","setLog","fileList","setFileList","pasteListener","useCallback","e","file","useClipboard","error","time","Date","getTime","uid","rcFile","lastModified","lastModifiedDate","name","size","type","percent","originFileObj","upload","useEffect","openDB","dbName","storeName","storeOption","keyPath","autoIncrement","then","db","params","pageNum","pageSize","getDataByPage","add","data","addStore","document","addEventListener","removeEventListener","onFileHandle","url","window","open","Promise","resolve","formData","FormData","forEach","append","Resource","cdn","res","length","result","f","remoteFile","status","exists","info","setTimeout","thumbUrl","filter","catch","err","errorMsg","console","finally","getUploadCommit","a","page","isNumber","className","multiple","action","beforeUpload","onChange","listType","showUploadList","showRemoveIcon","removeIcon","stopPropagation","onRemove","onPreview","color","fontStyle","post","content","footer","onCancel","destroyOnClose","scroll","x","rowKey","dataSource","pagination","getCookie","cname","ca","cookie","split","i","c","trim","indexOf","substring","tip","msg","modalQueueMap","Map","instance","Axios","create","timeout","interceptors","request","use","config","token","headers","withCredentials","reject","response","resData","message","code","has","set","warn","delete","codeErrorHandle","other","netErrorHandle","navigator","onLine","RegExp","isObject","prototype","toString","call","isArray","getTransaction","mode","transaction","onerror","ev","version","indexedDB","event","onsuccess","onupgradeneeded","objectStoreNames","contains","createObjectStore","objectStore","updateStore","readStore","key","getAll","get","undefined","removeStore","getAllKeys","allKeys","count","keysList","allKeysReverse","reverse","len","push","slice","currentKeys","start","Math","min","end","max","boundKeyRange","IDBKeyRange","bound","rowData","openCursor","cursor","continue","handleJsonStr","str","json","JSON","parse","replace","stringify","isJson","filterObjectEmptyValue","keys","arrayGroup","array","subGroupLength","fillItem","reslut","group","Array","fill","getRedis","redis","setRedis","val","existRedis","successCode","HEADER","fetchMethod","_url","_config","fetch","ok","Error","statusText","dataKey","directReturn","matchUrlSearchParams","urlSearchParams","u","URLSearchParams","reduce","pre","next","includes","constructor","FetchApi","bodyParams","method","body","isUpoad","put","patch","this","Http","HttpResource","doc","directFetch"],"mappings":"4VAEeA,G,OADK,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,uhBAA2hB,KAAQ,QAAS,MAAS,a,SCK5sBA,EAAgB,SAAuBC,EAAOC,GAChD,OAAoBC,gBAAoBC,IAAUC,OAAOC,OAAO,GAAIL,EAAO,CACzEC,IAAKA,EACLK,KAAMC,MAIVR,EAAcS,YAAc,gBACAN,ICMxBO,EAAkBC,EDNMR,eAAiBH,G,oCEHhCY,EAAU,CACrB,CACEC,MAAO,eACPC,MAAO,QACPC,UAAW,WACXC,MAAO,SACPC,OAAQ,SAACC,GAAD,OAAmB,yBAAKC,OAAO,MAAMC,IAAKF,EAAOG,IAAKH,MAEhE,CACEL,MAAO,2BACPE,UAAW,OAEb,CACEF,MAAO,eACPC,MAAO,QACPE,MAAO,SACPD,UAAW,MACXO,MAAO,QACPL,OAAQ,SAACC,GAAD,OACN,oCACE,uBAAGK,KAAML,EAAOM,OAAO,SAASC,IAAI,uBAApC,4BAGA,uBACEC,MAAO,CACLC,WAAY,QAEdC,QAAS,WACPC,IAAKX,GACL,IAAQY,QAAQ,6BAAWZ,KAN/B,gC,QDhBAa,EAAR,IAAQA,QAIJC,GAAU,EAEC,SAASC,IACtB,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAwCF,oBAAS,GAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KACA,EAAoCJ,mBAAS,IAA7C,mBAAOK,EAAP,KAAmBC,EAAnB,KACA,EAA0BN,mBAAS,GAAnC,mBAAOO,EAAP,KAAcC,EAAd,KACA,EAAsBR,mBAAS,IAA/B,mBAAOS,EAAP,KAAYC,EAAZ,KAEA,EAAgCV,mBAAc,IAA9C,mBAAOW,EAAP,KAAiBC,EAAjB,KAEMC,EAAgBC,uBAAY,SAACC,GACjC,IAAMC,EAAOC,YAAaF,GAC1B,IAAKC,EAAM,OAAO,IAAQE,MAAM,0DAChC,IAAMC,GAAO,IAAIC,MAAOC,UAClBC,EAAG,yBAAqBH,GAC9BhD,OAAOC,OAAO4C,EAAM,CAAEM,QACtB,IAAMC,EAAS,CACbC,aAAcR,EAAKQ,aACnBC,iBAAmBT,EAAaS,iBAChCC,KAAMP,EAAO,OACbQ,KAAMX,EAAKW,KACXC,KAAMZ,EAAKY,KACXC,QAAS,EACTP,IAAKA,EACLQ,cAAed,GAEjBe,EAAO,CAACR,MACP,IAEHS,qBAAU,WAeR,OAdAC,YAAO,CACLC,OAAQ,uBACRC,UAAW,CAAC,iBACZC,YAAa,CAAEC,QAAS,MAAOC,eAAe,KAC7CC,MAAK,SAACC,GACP/D,EAAsB,eACpBgE,EADoB,uDAC6B,CAAEC,QAAS,EAAGC,SAAU,IADrD,OAEjBC,YAAc,aAAEJ,KAAIL,UAAW,iBAAoBM,KAExDjE,EAAc,CACZqE,IAAK,SAACC,GAAD,OAAeC,YAAS,CAAEP,KAAIL,UAAW,gBAAiBW,cAGnEE,SAASC,iBAAiB,QAASpC,GAC5B,kBAAMmC,SAASE,oBAAoB,QAASrC,MAClD,IAEH,IAQMsC,EAAe,SAACvB,GAAD,OAA8B,SAACZ,GAClD,MAAqBA,EAAboC,WAAR,MAAc,GAAd,EACA,IAAKA,EAAK,OAAO,EACjB,GAAa,YAATxB,EACFjC,IAAKyD,GACL,IAAQxD,QAAQ,6BAAWwD,QACtB,GAAa,SAATxB,EAET,OADAyB,OAAOC,KAAKF,GACLG,QAAQC,SAAQ,KAiBrBzB,EAAS,SAACpB,GACd,GAAIb,EAAS,OAAO,EACpBA,GAAU,EACV,IAAM2D,EAAW,IAAIC,SACrB/C,EAASgD,SAAQ,SAAC3C,GAChB,IAAQc,EAA6Bd,EAA7Bc,cAAeJ,EAAcV,EAAdU,KAAMJ,EAAQN,EAARM,IACxBN,EAAKoC,KACRK,EAASG,OAAO,QAAS9B,EAAyBJ,EAAO,IAAMJ,MAGnEuC,IAASC,IACN/B,OAAO,GAAI0B,GACXlB,MAAK,SAACwB,GACL,GAAIA,GAAOA,EAAIC,OAAS,EAAG,CACzB,IAAMC,EAAS,GACfF,EAAIJ,SAAQ,SAACO,GAAD,OAAaD,EAAOC,EAAE5C,KAAO4C,KACzCvD,EAASgD,SAAQ,SAAC3C,GAChB,IAAMmD,EAAaF,EAAOjD,EAAKM,KAC3B6C,IACFnD,EAAKoD,OAAS,UACdpD,EAAKoC,IAAMe,EAAWf,IACI,IAAtBe,EAAWE,QACb,IAAQC,KACN,wDACU,uBAAGjF,KAAM8E,EAAWf,KAAMe,EAAWf,MAE/C,IAIJmB,YAAW,WACT/F,GAAeA,EAAYqE,IAAI,CAAEO,IAAKe,EAAWf,IAAKoB,SAAUxD,EAAKwD,aACpE,SAGPT,EAAIU,QAAO,SAACP,GAAD,OAAyB,IAAbA,EAAEG,UAAcL,OAAS,GAAK,IAAQpE,QAAR,4BACrDgB,EAAYD,OAGf+D,OAAM,SAACC,GACN,IAAMC,EAAW,mDACjBjE,EAASgD,SAAQ,SAAC3C,GAChBA,EAAKoD,OAAS,QACdpD,EAAKE,MAAQ0D,KAEfhE,EAAYD,GACZ,IAAQO,MAAM0D,GACdC,QAAQ3D,MAAMyD,MAEfG,SAAQ,WACPhF,GAAU,MAIViF,EAAe,uCAAG,kDAAAC,EAAA,6DAAOC,EAAP,+BAAsB,EAAtB,SACJxG,EAAoB,CAAEiE,QAASwC,YAASD,GAAQA,EAAO,IADnD,OAChBlB,EADgB,YAEOA,GAAO,IAA5BjB,YAFc,MAEP,GAFO,EAEHvC,EAFG,EAEHA,MACnBD,EAAcwC,GACd1C,GAAgB,GAChBI,EAASD,GALa,2CAAH,qDA4BrB,OACE,yBAAK4E,UAAU,eACb,yBAAKA,UAAU,2BACb,yBAAKA,UAAU,sBACb,kBAACtF,EAAD,CACEsF,UAAU,0BACVzD,KAAK,OACL0D,UAAQ,EACRC,OAAO,UACP1E,SAAUA,EACV2E,aAzGW,SAACtE,GAIpB,OAHAA,EAAKoD,OAAS,YAEdxD,EAAY,GAAD,mBAAKD,GAAL,CAAeK,MACnB,GAsGCuE,SAnGW,SAACjB,GACpB,IAAQ3D,EAAa2D,EAAb3D,SACRkE,QAAQpE,IAAI6D,GACZvC,EAAOpB,IAiGC6E,SAAS,UACTC,eAAgB,CACdC,gBAAgB,EAChBC,WAnCY,SAAC3E,GACvB,OAAOA,EAAKE,MACV,eACEF,EAAKoC,IACP,6BACE,0BACE1D,QAAS,SAACqB,GACRA,EAAE6E,kBACFzC,EAAa,UAAbA,CAAwBnC,KAH5B,4BAQA,0BAAMxB,MAAO,CAAEC,WAAY,KAA3B,iBAGF,MAqBMoG,SAAU1C,EAAa,QACvB2C,UAAW3C,EAAa,YAExB,kBAAC,EAAD,CAAegC,UAAU,iCACzB,uBAAGA,UAAU,gCAAb,8FACA,uBAAGA,UAAU,gCAAb,gBACK,0BAAM3F,MAAO,CAAEuG,MAAO,MAAOC,UAAW,WAAxC,4BADL,wCAEE,6BAFF,kEAIE,6BAJF,gHAUN,yBAAKb,UAAU,cACb,uBAAQA,UAAU,MAAMvD,KAAK,UAAUlC,QAASqF,GAAhD,4BAGA,uBAAQI,UAAU,MAAMvD,KAAK,UAAUlC,QAvJ9B,WACbmE,IAASC,IAAImC,KAAK,CAAErE,KAAM,OAAS,IAAIW,MAAK,SAACwB,GAC3C,IAAQmC,EAAiBnC,EAAjBmC,QACRxF,EAAOwF,GACPhG,GAAW,QAmJT,iBAKF,uBACEiF,UAAU,mBACVgB,QAAQ,EACRlG,QAASA,EACTmG,SAAU,kBAAMlG,GAAW,KAE3B,yBAAKiF,UAAU,eAAe1E,IAGhC,uBACE9B,MAAM,2BACNC,MAAM,MACNyH,gBAAc,EACdpG,QAASE,EACTgG,OAAQ,KACRC,SAAU,kBAAMhG,GAAgB,KAEhC,uBACEkG,OAAQ,CAAEC,EAAG,QACbC,OAAO,MACPC,WAAYpG,EACZ3B,QAASA,EACTgI,WAAY,CAAEnG,QAAOgF,SAAUR,S,iCElPzC,SAAS4B,EAAUC,GAGjB,IAFA,IAAIlF,EAAOkF,EAAQ,IACfC,EAAK7D,SAAS8D,OAAOC,MAAM,KACtBC,EAAI,EAAGA,EAAIH,EAAG7C,OAAQgD,IAAK,CAClC,IAAIC,EAAIJ,EAAGG,GAAGE,OACd,GAAuB,GAAnBD,EAAEE,QAAQzF,GACZ,OAAOuF,EAAEG,UAAU1F,EAAKsC,OAAQiD,EAAEjD,QAGtC,MAAO,G,kfCZHqD,EAAM,SAACC,GACXzC,QAAQ3D,MAAMoG,IAGVC,EAAgB,IAAIC,IAmFpBC,EAAWC,IAAMC,OAAO,CAAEC,QAAS,MAOzCH,EAASI,aAAaC,QAAQC,KAC5B,SAACC,GAEC,IAAIC,EAAQtB,EAAU,SAGtB,OAFAsB,IAAUD,EAAOE,QAAQD,MAAQA,GACjCD,EAAOG,iBAAkB,EAClBH,KAET,SAAC9G,GAAD,OAAWqC,QAAQ6E,OAAOlH,MAQ5BuG,EAASI,aAAaQ,SAASN,KAC7B,SAAChE,GACC,OAAIA,EAAIK,QAAwB,KAAdL,EAAIK,OACbb,QAAQC,QAAQO,EAAIjB,OA1GT,SAACwF,GACvB,IAAIC,EAAUD,EAAQC,QACtB,OAAQD,EAAQE,MACd,KAAK,EACHD,EAAUA,GAAW,2BACrB,MACF,KAAK,OACHA,EAAUA,GAAW,oBACrB,MACF,KAAK,OACHA,EAAUA,GAAW,gCACrB,MACF,KAAK,OACHA,EAAUA,GAAW,+DACrB,MACF,KAAK,OACHA,EAAUA,GAAW,yBACrB,MACF,KAAK,OACHA,EAAUA,GAAW,2EACrB,MACF,KAAK,OACHA,EAAUA,GAAW,yGACrB,MACF,KAAK,IACHA,EAAUA,GAAW,2BAcrBhB,EAAckB,IAAIH,EAAQE,QAG9BjB,EAAcmB,IAAIJ,EAAQE,KAAM,CAC9BA,KAAMF,EAAQE,KACdD,QAASA,IAGX1D,QAAQpE,IAAI,iBAAkB8G,GAEV,KAAhBe,EAAQE,KACV3D,QAAQ8D,KAAKJ,IAGb1D,QAAQ3D,MAAMqH,GACdhB,EAAcqB,OAAON,EAAQE,QAsD3BK,CAAgB9E,EAAIjB,MACbS,QAAQ6E,OAAOrE,OAG1B,SAAC7C,GACC,IAAQmH,EAAanH,EAAbmH,SACR,OAAIA,GAvDe,SAACjE,EAAa0E,GACnC,OAAQ1E,GAEN,KAAK,IAEH,MACF,KAAK,IACHiD,EAAI,4DAIJ,MACF,KAAK,IACHA,EAAI,mCACJ,MACF,QACExC,QAAQpE,IAAIqI,IAwCZC,CAAeV,EAASjE,OAAQiE,EAASvF,KAAKyF,SACvChF,QAAQ6E,OAAOC,IAGjBhF,OAAO2F,UAAUC,OAGb1F,QAAQ6E,OAAOlH,QAHxB,KCpHC,IAAIgI,OACP,iZACA,KD2HWzB,ICtHFvC,EAAW,SAAClG,GACvB,MAAwB,kBAAVA,GAOHmK,EAAW,SAACnK,GACvB,MAAiD,oBAA1Cb,OAAOiL,UAAUC,SAASC,KAAKtK,IAe3BuK,EAAU,SAACvK,GACtB,MAAiD,mBAA1Cb,OAAOiL,UAAUC,SAASC,KAAKtK,I,iCCtClCwK,EAAiB,SAAChH,EAAiBL,EAAmBsH,GAC1D,IAAM1F,EAAMvB,EAAGkH,YAAY,CAACvH,GAAYsH,GAIxC,OAHA1F,EAAI4F,QAAU,SAACC,GACb/E,QAAQ8D,KAAKiB,IAER7F,GAGI9B,EAAS,SAAC,GAAD,IACpBC,EADoB,EACpBA,OADoB,IAEpB2H,eAFoB,MAEV,EAFU,MAGpB1H,iBAHoB,MAGR,CAAC,IAHO,MAIpBC,mBAJoB,MAIN,CAAEE,eAAe,GAJX,SAWpB,IAAIiB,SAAQ,SAACC,EAAS4E,GACpB,IAAI5F,EACCN,GAAQkG,EAAO,6BAEpB,IAAMN,EAAUzE,OAAOyG,UAAUxG,KAAKpB,EAAQ2H,GAE9C/B,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,gBAAiBoB,GAC9B3B,EAAO2B,IAGTjC,EAAQkC,UAAY,SAAUD,GAC5BvH,EAAKsF,EAAQ7D,OACbT,EAAQhB,IAGVsF,EAAQmC,gBAAkB,SAAUF,GAClCvH,EAAKuH,EAAMzK,OAAO2E,OAElB9B,EAAUwB,SAAQ,SAACjC,GACZc,EAAG0H,iBAAiBC,SAASzI,IAClBc,EAAG4H,kBAAkB1I,EAAMU,WAMtCW,EAAW,SAAC,GAAD,IACtBP,EADsB,EACtBA,GACAL,EAFsB,EAEtBA,UAFsB,IAGtBW,YAHsB,MAGf,GAHe,SAStB,IAAIS,SAAQ,SAACC,EAAS4E,GACf5F,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBACvB,IAAMN,EAAU0B,EAAehH,EAAIL,EAAW,aAAakI,YAAYlI,GAAWU,IAAIC,GAEtFgF,EAAQkC,UAAY,SAAUD,GAC5BvG,EAAQuG,IAGVjC,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,iBACbP,EAAO2B,QAIAO,EAAc,SAAC,GAAD,IACzB9H,EADyB,EACzBA,GACAL,EAFyB,EAEzBA,UAFyB,IAGzBW,YAHyB,MAGlB,GAHkB,SASzB,IAAIS,QAAJ,uCAAY,WAAOC,EAAS4E,GAAhB,iBAAApD,EAAA,6DACLxC,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBAFb,SAGQmC,EAAU,CAAE/H,KAAIL,YAAWqI,IAAK1H,EAAK0H,MAH7C,OAGJzG,EAHI,QAIJ+D,EAAU0B,EAAehH,EAAIL,EAAW,aAC3CkI,YAAYlI,GACZ4B,EAAM,MAAQ,OAAOjB,IAEhBkH,UAAY,SAAUD,GAC5BvG,EAAQuG,IAGVjC,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,oBACbP,EAAO2B,IAdC,2CAAZ,0DAkBWQ,EAAY,SAAC,GAAD,IACvB/H,EADuB,EACvBA,GACAL,EAFuB,EAEvBA,UACAqI,EAHuB,EAGvBA,IAHuB,IAIvB5I,YAJuB,MAIhB,MAJgB,SAWvB,IAAI2B,SAAQ,SAACC,EAAS4E,GACf5F,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBACvB,IACMiC,EADcb,EAAehH,EAAIL,GACPkI,YAAYlI,GACtC2F,EACK,WAATlG,EAAoByI,EAAYI,SAAWJ,EAAYK,IAAIF,GAE7D1C,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,kBACbP,EAAO2B,IAGTjC,EAAQkC,UAAY,SAAUD,GACxBjC,EAAQ7D,OACVT,EAAQsE,EAAQ7D,QAEhBT,OAAQmH,QAKHC,EAAc,SAAC,GAAD,IACzBpI,EADyB,EACzBA,GACAL,EAFyB,EAEzBA,UACAqI,EAHyB,EAGzBA,IAHyB,OASzB,IAAIjH,SAAQ,SAACC,EAAS4E,GACf5F,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBACvB,IAEMN,EAFc0B,EAAehH,EAAIL,EAAW,aAClBkI,YAAYlI,GAChByG,OAAO4B,GAEnC1C,EAAQkC,UAAY,SAAUD,GAC5BvG,EAAQuG,IAEVjC,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,oBACbP,EAAO2B,QAIAc,EAAa,SAAC,GAAD,IACxBrI,EADwB,EACxBA,GACAL,EAFwB,EAExBA,UAFwB,OAOxB,IAAIoB,SAAQ,SAACC,EAAS4E,GACf5F,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBACvB,IAEMN,EAFc0B,EAAehH,EAAIL,GACPkI,YAAYlI,GAChB0I,aAE5B/C,EAAQkC,UAAY,SAAUD,GAC5BvG,EAAQsE,EAAQ7D,SAElB6D,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,qBACbP,EAAO2B,QAUAnH,EAAgB,SAAC,GAAD,IAC3BJ,EAD2B,EAC3BA,GACAL,EAF2B,EAE3BA,UACAO,EAH2B,EAG3BA,QAH2B,IAI3BC,gBAJ2B,MAIhB,GAJgB,SAW3B,IAAIY,QAAJ,uCAAY,WAAOC,EAAS4E,GAAhB,yCAAApD,EAAA,6DACLxC,GAAI4F,EAAO,cACXjG,GAAWiG,EAAO,qBAFb,SAGmByC,EAAW,CAAErI,KAAIL,cAHpC,aAGJ2I,EAHI,QAIE9G,OAAS,GAJX,uBAKRR,EAAQ,CAAEgF,KAAM,EAAG1F,KAAM,GAAIvC,MAAO,IAL5B,0BAaV,IALMmJ,EAAcF,EAAehH,EAAIL,EAAW,YAC5CkI,EAAcX,EAAYW,YAAYlI,GACtC4I,EAAQpI,GAAY,GACtBqI,EAAW,GACTC,EAAiBH,EAAQI,UACtBlE,EAAI,EAAGmE,EAAMF,EAAejH,OAAQgD,EAAImE,EAAKnE,GAAK+D,EACzDC,EAASI,KAAKH,EAAeI,MAAMrE,EAAGA,EAAI+D,IAEtCO,EAAcN,GAAUtI,GAAW,GAAK,GACxC6I,EAAQC,KAAKC,IAAL,MAAAD,KAAI,YAAQF,IACpBI,EAAMF,KAAKG,IAAL,MAAAH,KAAI,YAAQF,IAClBM,EAAgBC,YAAYC,MAAMP,EAAOG,GACzCK,EAAiB,IACjBjE,EAAUuC,EAAY2B,WAAWJ,IAC/B5B,UAAY,SAAUD,GAC5B,IAAMkC,EAASlC,EAAMzK,OAAO2E,OACvBgI,GAILF,EAAQX,KAAKa,EAAOjN,OACpBiN,EAAOC,YAJL1I,EAAQ,CAAEgF,KAAM,EAAGjI,MAAOuK,EAAQ9G,OAAQlB,KAAMiJ,EAAQb,aAM5DpD,EAAQ6B,QAAU,SAAUI,GAC1BlF,QAAQ8D,KAAK,kBACbP,EAAO,CAAEI,KAAM,EAAGtH,MAAO6I,KAjCjB,4CAAZ,0DC5LWoC,EAAgB,SAACC,GAC5B,IAAKA,EAAK,OAAOA,EACjB,IAAIC,EAAO,KACX,IACEA,EAAOC,KAAKC,MAAMH,EAAII,QAAQ,+CAAgD,UAC9E,MAAOtL,GACP2D,QAAQpE,IAAIS,GAEd,OAAOmL,EAAOC,KAAKG,UAAUJ,EAAM,KAAM,GAAKD,GAGnCM,EAAS,SAACN,GACrB,IACE,OAAOjD,EAASmD,KAAKC,MAAMH,IAC3B,MAAOrL,GACP,OAAO,IA4BE4L,EAAyB,SAAC7J,GACrC,IAAKA,EAAM,MAAO,GAClB,IAAMmB,EAAS,GAIf,OAHA9F,OAAOyO,KAAK9J,GAAMa,SAAQ,SAAC6G,GACX,OAAd1H,EAAK0H,SAA+BG,IAAd7H,EAAK0H,KAAuBvG,EAAOuG,GAAO1H,EAAK0H,OAEhEvG,GAQK4I,EAAa,SAACC,EAAcC,EAAwBC,GAEhE,IADA,IAAMC,EAAS,GACNjG,EAAI,EAAGmE,EAAM2B,EAAM9I,OAAQgD,EAAImE,EAAKnE,GAAK+F,EAAgB,CAChE,IAAMG,EAAQJ,EAAMzB,MAAMrE,EAAGA,EAAI+F,GAC7BC,GAAYE,EAAMlJ,OAAS+I,GAC7BG,EAAM9B,KAAN,MAAA8B,EAAK,YAAS,IAAIC,MAAMJ,EAAiBG,EAAMlJ,QAAQoJ,KAAKJ,KAE9DC,EAAO7B,KAAK8B,GAEd,OAAOD,G,aCtEII,EAAQ,uCAAG,WAAO7C,GAAP,eAAAxF,EAAA,yDACjBwF,EADiB,uBAEpB3F,QAAQ3D,MAAM,0BAFM,kBAGbqC,QAAQ6E,UAHK,gCAMGvE,IAASyJ,MAAM5C,IAAI,CAAE9I,KAAM,MAAO4I,OAAO,IAN5C,cAMdzG,EANc,yBH2BE,kBGpBNA,EAAOuI,KAAKC,MAAMxI,GAAOA,GAPrB,2DASbc,QAAQpE,IAAR,OATa,0DAAH,sDAaR8M,EAAQ,uCAAG,WAAO/C,EAAaxL,GAApB,eAAAgG,EAAA,yDACjBwF,EADiB,uBAEpB3F,QAAQ3D,MAAM,0BAFM,kBAGbqC,QAAQ6E,UAHK,UAKjBpJ,EALiB,uBAMpB6F,QAAQ3D,MAAM,0BANM,kBAObqC,QAAQ6E,UAPK,cAShBoF,EAAMrE,EAASnK,IAAUuK,EAAQvK,GAASsN,KAAKG,UAAUzN,GAASA,EAAMqK,WATxD,2BAWbxF,IAASyJ,MAAMrH,KAAK,CAAErE,KAAM,OAAS,CAAEkB,KAAM,CAAE0H,MAAKgD,UAXvC,2DAab3I,QAAQpE,IAAR,OAba,0DAAH,wDA6BRgN,EAAU,uCAAG,WAAOjD,GAAP,SAAAxF,EAAA,yDACnBwF,EADmB,uBAEtB3F,QAAQ3D,MAAM,0BAFQ,kBAGfqC,QAAQ6E,UAHO,yCAMfvE,IAASyJ,MAAM5C,IAAI,CAAE9I,KAAM,SAAU4I,SANtB,yDAQf3F,QAAQpE,IAAR,OARe,yDAAH,uD,mICxCjBiN,EAAc,CAAC,GAWfC,EAAc,CAClBzF,QAAS,CACP,eAAgB,mCAId0F,EAAc,SAACC,GAAqC,IAAvBC,EAAsB,uDAAP,GAChD,OAAOC,MAAMF,EAAD,YAAC,eAAWF,GAAWG,IAChCvL,MAAK,SAAC8F,GACL,IAAKA,EAAS2F,GACZ,MAAMC,MAAM5F,EAAS6F,YAEvB,OAAO7F,EAASgE,OAAO9J,UAAKoI,GAAW,kBAAMpH,QAAQC,QAAQ,UAE9DjB,MAAK,SAACwB,GACL,MAAmCA,EAA3BiE,cAAR,MAAiB,GAAjB,EAAqBQ,EAAczE,EAAdyE,KAAMlB,EAAQvD,EAARuD,IAC3B,EAA6BU,EAArBmG,eAAR,MAAkB,OAAlB,EACA,EAAiCL,EAAzBM,aACR,YADA,SAES7K,QAAQC,QAAQO,GAEZ,MAATyE,EAEKjF,QAAQ6E,OAAOrE,GAEpB2J,EAAYvG,QAAQqB,IAAS,EACxBjF,QAAQC,QAAQO,EAAIoK,IAAY,KAEzC,EAAAnJ,EAAQ9D,MAAMoG,GAAO,4BACd/D,QAAQ6E,OAAOrE,OAEvBW,OAAM,SAACC,GACN,MAAMA,MAIN0J,EAAuB,SAACjL,EAAakL,GACzC,IAAKA,EACH,OAAOlL,EAAIoJ,QAAQ,YAAa,IAElC,IAAM+B,EAAI,IAAIC,gBAEVX,EAAO1P,OAAOyO,KAAK0B,GAAiBG,QAAO,SAACC,EAAKC,GACnD,OAAID,EAAIE,SAAS,IAAMD,GACdD,EAAIlC,QAAQ,IAAMmC,EAAML,EAAgBK,KAE3CL,EAAgBK,IAASL,EAAgBK,GAAME,cAAgB1B,MACjEmB,EAAgBK,GAAMhL,SAAQ,SAAC3E,GAC7BuP,EAAE3K,OAAO+K,EAAM3P,MAGjBuP,EAAE3K,OAAO+K,EAAML,EAAgBK,IAE1BD,KAERtL,GAGH,OADAyK,EAAOA,EAAKrB,QAAQ,YAAa,MACD,KAAjB+B,EAAElF,WAAoB,GAAK,IAAMkF,IAG5CO,EAGJ,WAAYjB,GAAe,IAAD,gCAF1BzK,IAAM,GAEoB,KAI1BsH,IAAM,SAAC4D,EAAyBS,EAAqB/G,GACnD,OAAO4F,EACLS,EAAqB,EAAKjL,IAAN,YAAC,eAAekL,GAAoBS,IACxD/G,IAPsB,KAW1B/B,KAAO,SAACqI,EAA0BS,EAAkB/G,GAClD,OAAO4F,EAAYS,EAAqB,EAAKjL,IAAKkL,GAAhC,YAAC,eACdtG,GADa,IAEhBgH,OAAQ,OACRC,KAAM3C,KAAKG,UAAUE,YAAuBoC,QAftB,KAmB1BhN,OAAS,SAACuM,EAAyBS,GACjC,OAAOnB,EAAYS,EAAqB,EAAKjL,IAAKkL,GAAkB,CAClEU,OAAQ,OACRE,SAAS,EACTD,KAAMF,KAvBgB,KA2B1BnG,OAAS,SAAC0F,EAAyBtG,GACjC,OAAO4F,EAAYS,EAAqB,EAAKjL,IAAKkL,GAAhC,YAAC,eACdtG,GADa,IAEhBgH,OAAQ,aA9Bc,KAkC1BG,IAAM,SAACb,EAAyBS,EAAoB/G,GAClD,OAAO4F,EAAYS,EAAqB,EAAKjL,IAAKkL,GAAhC,YAAC,eACdtG,GADa,IAEhBgH,OAAQ,MACRC,KAAM3C,KAAKG,UAAUE,YAAuBoC,QAtCtB,KA0C1BK,MAAQ,SAACd,EAAyBS,EAAoB/G,GACpD,OAAO4F,EAAYS,EAAqB,EAAKjL,IAAKkL,GAAhC,YAAC,eACdtG,GADa,IAEhBgH,OAAQ,QACRC,KAAM3C,KAAKG,UAAUE,YAAuBoC,QA7C9CM,KAAKjM,IAAMyK,GAsDAyB,EAJF,SAAClM,GACZ,OAAO,IAAI0L,EAAS1L,IC9HTS,EAAW,CAItBC,IAAKyL,EAAa,GAAD,OARF,IAQE,OAN0C,GAM1C,kBACjBnM,IAAKmM,EAAa,GAAD,OATF,IASE,OAP0C,GAO1C,eAIjBjC,MAAOiC,EAAa,GAAD,OAbJ,IAaI,OAXwC,GAWxC,iBAKnBC,IAAKD,EAAa,GAAD,OAlBF,IAkBE,OAhB0C,GAgB1C,WAKjBE,YAAaF,EAAa,W","file":"static/js/9.b3ea80b2.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\n\nInboxOutlined.displayName = 'InboxOutlined';\nexport default /*#__PURE__*/React.forwardRef(InboxOutlined);","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-24 18:39:02\n * @Last Modified by: qiuz\n */\n\nimport { Button, message, Upload, Modal, Table } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport './index.less';\nimport { InboxOutlined } from '@ant-design/icons';\nimport { addStore, getDataByPage, isNumber, openDB } from 'utils';\nimport copy from 'copy-to-clipboard';\nimport { Resource } from 'service';\nimport { RcFile, UploadFile } from 'antd/lib/upload/interface';\nimport { columns } from './constant';\nimport { useClipboard } from 'hooks';\n\nconst { Dragger } = Upload;\n\nlet uploadStore: any, getUploadCommitList: any;\n\nlet loading = false;\n\nexport default function CDNImgUpload() {\n  const [visible, setVisible] = useState(false);\n  const [historyModal, setHistoryModal] = useState(false);\n  const [uploadList, setUploadList] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [log, setLog] = useState('');\n\n  const [fileList, setFileList] = useState<any>([]);\n\n  const pasteListener = useCallback((e: ClipboardEvent) => {\n    const file = useClipboard(e);\n    if (!file) return message.error('获取剪贴板图片失败');\n    const time = new Date().getTime();\n    const uid = `from-clipboard-${time}`;\n    Object.assign(file, { uid });\n    const rcFile = {\n      lastModified: file.lastModified,\n      lastModifiedDate: (file as any).lastModifiedDate,\n      name: time + '.png',\n      size: file.size,\n      type: file.type,\n      percent: 0,\n      uid: uid,\n      originFileObj: file as RcFile\n    };\n    upload([rcFile]);\n  }, []);\n\n  useEffect(() => {\n    openDB({\n      dbName: 'tools_cdn_img_config',\n      storeName: ['upload_commit'],\n      storeOption: { keyPath: 'key', autoIncrement: true }\n    }).then((db: IDBDatabase) => {\n      getUploadCommitList = (\n        params: { pageNum: number; pageSize?: number } = { pageNum: 1, pageSize: 10 }\n      ) => getDataByPage({ db, storeName: 'upload_commit', ...params });\n      // 提供全局操作对象\n      uploadStore = {\n        add: (data: any) => addStore({ db, storeName: 'upload_commit', data })\n      };\n    });\n    document.addEventListener('paste', pasteListener);\n    return () => document.removeEventListener('paste', pasteListener);\n  }, []);\n\n  const getLog = () => {\n    Resource.cdn.post({ type: 'log' }, {}).then((res) => {\n      const { content }: any = res;\n      setLog(content);\n      setVisible(true);\n    });\n  };\n\n  const onFileHandle = (type: 'preview' | 'look') => (file: UploadFile) => {\n    const { url = '' } = file;\n    if (!url) return true;\n    if (type === 'preview') {\n      copy(url);\n      message.success('复制成功: ' + url);\n    } else if (type === 'look') {\n      window.open(url);\n      return Promise.resolve(false);\n    }\n  };\n\n  const beforeUpload = (file: UploadFile) => {\n    file.status = 'uploading';\n    // 这里需要先将文件列表传给Upload组件，以显示loading动画\n    setFileList([...fileList, file]);\n    return false;\n  };\n\n  const onFileChange = (info: any) => {\n    const { fileList } = info;\n    console.log(info);\n    upload(fileList);\n  };\n\n  const upload = (fileList: UploadFile[]) => {\n    if (loading) return false;\n    loading = true;\n    const formData = new FormData();\n    fileList.forEach((file: UploadFile) => {\n      const { originFileObj, name, uid } = file;\n      if (!file.url) {\n        formData.append('files', originFileObj as RcFile, name + '.' + uid);\n      }\n    });\n    Resource.cdn\n      .upload({}, formData)\n      .then((res: any) => {\n        if (res && res.length > 0) {\n          const result = {};\n          res.forEach((f: any) => (result[f.uid] = f));\n          fileList.forEach((file: UploadFile) => {\n            const remoteFile = result[file.uid];\n            if (remoteFile) {\n              file.status = 'success';\n              file.url = remoteFile.url;\n              if (remoteFile.exists === 1) {\n                message.info(\n                  <span>\n                    CDN已存在: <a href={remoteFile.url}>{remoteFile.url}</a>\n                  </span>,\n                  10\n                );\n              }\n              // 如果直接存储，Upload组件内部还没有生成thumbUrl base64，所以这里等待100ms再执行保存操作\n              setTimeout(() => {\n                uploadStore && uploadStore.add({ url: remoteFile.url, thumbUrl: file.thumbUrl });\n              }, 100);\n            }\n          });\n          res.filter((f: any) => f.exists !== 1).length > 0 && message.success(`上传成功`);\n          setFileList(fileList);\n        }\n      })\n      .catch((err) => {\n        const errorMsg = '上传失败，请重试';\n        fileList.forEach((file: UploadFile) => {\n          file.status = 'error';\n          file.error = errorMsg;\n        });\n        setFileList(fileList);\n        message.error(errorMsg);\n        console.error(err);\n      })\n      .finally(() => {\n        loading = false;\n      });\n  };\n\n  const getUploadCommit = async (page: number = 1) => {\n    const res = await getUploadCommitList({ pageNum: isNumber(page) ? page : 1 });\n    const { data = [], total } = res || {};\n    setUploadList(data);\n    setHistoryModal(true);\n    setTotal(total);\n  };\n\n  const renderItemRight = (file: UploadFile) => {\n    return file.error ? (\n      '删除'\n    ) : file.url ? (\n      <div>\n        <span\n          onClick={(e) => {\n            e.stopPropagation();\n            onFileHandle('preview')(file);\n          }}\n        >\n          复制链接\n        </span>\n        <span style={{ marginLeft: 10 }}>查看</span>\n      </div>\n    ) : (\n      ' '\n    );\n  };\n\n  return (\n    <div className=\"cdn-content\">\n      <div className=\"cdn-content-upload-wrap\">\n        <div className=\"cdn-content-upload\">\n          <Dragger\n            className=\"cdn-content-upload-drag\"\n            name=\"file\"\n            multiple\n            action=\"/upload\"\n            fileList={fileList}\n            beforeUpload={beforeUpload}\n            onChange={onFileChange}\n            listType=\"picture\"\n            showUploadList={{\n              showRemoveIcon: true,\n              removeIcon: renderItemRight\n            }}\n            onRemove={onFileHandle('look')}\n            onPreview={onFileHandle('preview')}\n          >\n            <InboxOutlined className=\"cdn-content-upload-drag-icon\" />\n            <p className=\"cdn-content-upload-drag-text\">点击或拖动文件到该区域上传文件</p>\n            <p className=\"cdn-content-upload-drag-hint\">\n              支持 <span style={{ color: 'red', fontStyle: 'italic' }}>屏幕截图</span> 在此粘贴上传\n              <br />\n              支持单次、批量上传至CDN\n              <br />\n              上传完成后，可能需要等待几分钟CDN更新\n            </p>\n          </Dragger>\n        </div>\n      </div>\n      <div className=\"option-btn\">\n        <Button className=\"btn\" type=\"primary\" onClick={getUploadCommit as any}>\n          上传记录\n        </Button>\n        <Button className=\"btn\" type=\"primary\" onClick={getLog}>\n          日志\n        </Button>\n      </div>\n\n      <Modal\n        className=\"cdn-upload-modal\"\n        footer={false}\n        visible={visible}\n        onCancel={() => setVisible(false)}\n      >\n        <div className=\"log-content\">{log}</div>\n      </Modal>\n\n      <Modal\n        title=\"上传记录\"\n        width=\"80%\"\n        destroyOnClose\n        visible={historyModal}\n        footer={null}\n        onCancel={() => setHistoryModal(false)}\n      >\n        <Table\n          scroll={{ x: '100%' }}\n          rowKey=\"key\"\n          dataSource={uploadList}\n          columns={columns}\n          pagination={{ total, onChange: getUploadCommit }}\n        />\n      </Modal>\n    </div>\n  );\n}\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-02-20 16:24:06\n * @Last Modified by: qiuz\n */\n\nimport React from 'react';\nimport { message } from 'antd';\nimport copy from 'copy-to-clipboard';\n\nexport const columns = [\n  {\n    title: '预览',\n    width: '150px',\n    dataIndex: 'thumbUrl',\n    align: 'center' as 'center',\n    render: (value: string) => <img height=\"100\" src={value} alt={value} />\n  },\n  {\n    title: '图片链接',\n    dataIndex: 'url'\n  },\n  {\n    title: '操作',\n    width: '200px',\n    align: 'center' as 'center',\n    dataIndex: 'url',\n    fixed: 'right' as 'right',\n    render: (value: string) => (\n      <>\n        <a href={value} target=\"_blank\" rel=\"noreferrer noopener\">\n          查看大图\n        </a>\n        <a\n          style={{\n            marginLeft: '10px'\n          }}\n          onClick={() => {\n            copy(value);\n            message.success('复制成功: ' + value);\n          }}\n        >\n          复制链接\n        </a>\n      </>\n    )\n  }\n];\n","function setCookie(cname: any, cvalue: any, exdays: any) {\n  var d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  var expires = 'expires=' + d.toUTCString();\n  document.cookie = cname + '=' + cvalue + '; ' + expires;\n}\nfunction getCookie(cname: any) {\n  var name = cname + '=';\n  var ca = document.cookie.split(';');\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i].trim();\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return '';\n}\n\nfunction checkCookie(cname: any, cookie: any, exdays: number) {\n  let user = getCookie(cname);\n  if (user != '') {\n    setCookie('token', '', exdays);\n  } else {\n    setCookie('token', cookie, exdays);\n  }\n}\nexport { setCookie, getCookie, checkCookie };\n","import Axios from 'axios';\nimport { getCookie } from '../utils/cookie';\n\nconst tip = (msg: string) => {\n  console.error(msg);\n};\n\nconst modalQueueMap = new Map();\n\n//接口返回正常,状态异常\nconst codeErrorHandle = (resData: { message: any; code: number }) => {\n  let message = resData.message;\n  switch (resData.code) {\n    case 1:\n      message = message || '操作失败';\n      break;\n    case 401001:\n      message = message || 'token为空';\n      break;\n    case 401002:\n      message = message || 'token未经授权';\n      break;\n    case 401003:\n      message = message || '经纪人没有买商业套餐';\n      break;\n    case 400001:\n      message = message || 'from字段空';\n      break;\n    case 401004:\n      message = message || '对不起，您暂无查看权限。';\n      break;\n    case 401005:\n      message = message || '对不起，您无认领权限，暂时无法操作';\n      break;\n    case 500:\n      message = message || '服务异常';\n      break;\n    default:\n    //token过期\n    // case 403:\n    //   message = '登录过期, 请重新登录';\n    //   break;\n    // case 406:\n    //   message = '对不起，暂无业主房源';\n    //   break;\n    //console.log('default:', resData);\n  }\n\n  //存在对应状态码\n  if (modalQueueMap.has(resData.code)) return;\n\n  //不存在对应状态码\n  modalQueueMap.set(resData.code, {\n    code: resData.code,\n    message: message\n  });\n\n  console.log('modalQueueMap:', modalQueueMap);\n\n  if (resData.code == 406) {\n    console.warn(message);\n    //modalQueueMap.delete(resData.code);\n  } else {\n    console.error(message);\n    modalQueueMap.delete(resData.code);\n  }\n};\n\n//请求失败后的错误统一处理\nconst netErrorHandle = (status: any, other: any) => {\n  switch (status) {\n    //未登录，去登录\n    case 401:\n      // toLogin();\n      break;\n    case 403:\n      tip('登录过期, 请重新登录');\n      // setTimeout(() => {\n      //   toLogin();\n      // }, 1000);\n      break;\n    case 404:\n      tip('请求不存在!');\n      break;\n    default:\n      console.log(other);\n  }\n};\n\n//创建axios实例\nconst instance = Axios.create({ timeout: 5000 });\n\n/**\n * 请求拦截器\n * 每次请求前，如果存在token则在请求头中携带token\n */\n\ninstance.interceptors.request.use(\n  (config) => {\n    // let token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxODg1NzM4MzMzMyJ9.GWnwqses61dKzz5KrOHApOoD0Bc4o1f6KLyGE4soj7U';//获取token\n    let token = getCookie('token');\n    token && (config.headers.token = token);\n    config.withCredentials = true;\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n/**\n * 响应拦截器\n * 拦截响应并统一处理\n */\n\ninstance.interceptors.response.use(\n  (res: any) => {\n    if (res.status && res.status == 200) {\n      return Promise.resolve(res.data);\n    } else {\n      codeErrorHandle(res.data);\n      return Promise.reject(res);\n    }\n  },\n  (error: any) => {\n    const { response } = error;\n    if (response) {\n      netErrorHandle(response.status, response.data.message);\n      return Promise.reject(response);\n    } else {\n      //断网情况处理\n      if (!window.navigator.onLine) {\n        //通知断网\n      } else {\n        return Promise.reject(error);\n      }\n    }\n  }\n);\n\nexport default instance;\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2018-12-11 11:27:12\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-19 23:29:29\n */\n\nconst pattern = {\n  // http://emailregex.com/\n  // eslint-disable-next-line no-useless-escape\n  email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n  // eslint-disable-next-line prefer-regex-literals\n  url: new RegExp(\n    '^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$',\n    'i'\n  ),\n  hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i\n};\n\nexport const isNumber = (value: any) => {\n  return typeof value === 'number';\n};\n\nexport const isRegExp = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object RegExp]';\n};\n\nexport const isObject = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Object]';\n};\n\nexport const isError = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Error]';\n};\n\nexport const isString = (value: any) => {\n  return typeof value === 'string';\n};\n\nexport const isFunction = (value: any) => {\n  return typeof value === 'function';\n};\n\nexport const isArray = (value: any) => {\n  return Object.prototype.toString.call(value) === '[object Array]';\n};\n\nexport const isEmptyObject = (obj: any) => {\n  if (obj === null || obj === undefined) return 'Cannot convert undefined or null to object';\n  return Object.keys(obj).length === 0;\n};\n\nexport const isBoolean = (value: any) => {\n  return (\n    value === true ||\n    value === false ||\n    (isObject(value) && Object.prototype.toString.call(value) === '[object Boolean]')\n  );\n};\n\nexport const isInteger = (value: any) => {\n  return isNumber(value) && parseInt(value, 10) === value;\n};\nexport const isFloat = (value: any) => {\n  return isNumber(value) && !isInteger(value);\n};\n\nexport const isDate = (value: any) => {\n  if (!value) return false;\n  return (\n    typeof value.getTime === 'function' &&\n    typeof value.getMonth === 'function' &&\n    typeof value.getYear === 'function'\n  );\n};\n\nexport const isEmail = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.email) && value.length < 255;\n};\n\nexport const isUrl = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.url);\n};\n\nexport const isHex = (value: any) => {\n  return typeof value === 'string' && !!value.match(pattern.hex);\n};\n\nexport const isPromise = (value: any) => {\n  return value && typeof value.then === 'function';\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-02-05 23:39:57\n * @Last Modified by: qiuz\n */\n\nconst getTransaction = (db: IDBDatabase, storeName: string, mode?: IDBTransactionMode) => {\n  const res = db.transaction([storeName], mode);\n  res.onerror = (ev) => {\n    console.warn(ev);\n  };\n  return res;\n};\n\nexport const openDB = ({\n  dbName,\n  version = 1,\n  storeName = [''],\n  storeOption = { autoIncrement: true }\n}: {\n  dbName: string;\n  version?: number;\n  storeName?: string[];\n  storeOption?: IDBObjectStoreParameters;\n}): Promise<IDBDatabase> =>\n  new Promise((resolve, reject) => {\n    let db: IDBDatabase;\n    if (!dbName) reject('db name shoudle be string');\n\n    const request = window.indexedDB.open(dbName, version);\n\n    request.onerror = function (event) {\n      console.warn('open db fail:', event);\n      reject(event);\n    };\n\n    request.onsuccess = function (event) {\n      db = request.result;\n      resolve(db);\n    };\n\n    request.onupgradeneeded = function (event: any) {\n      db = event.target.result;\n      let objectStore;\n      storeName.forEach((name: string) => {\n        if (!db.objectStoreNames.contains(name)) {\n          objectStore = db.createObjectStore(name, storeOption);\n        }\n      });\n    };\n  });\n\nexport const addStore = ({\n  db,\n  storeName,\n  data = {}\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  data: any;\n}) =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const request = getTransaction(db, storeName, 'readwrite').objectStore(storeName).add(data);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n\n    request.onerror = function (event) {\n      console.warn('new data fail');\n      reject(event);\n    };\n  });\n\nexport const updateStore = ({\n  db,\n  storeName,\n  data = {}\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  data: any;\n}) =>\n  new Promise(async (resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const res = await readStore({ db, storeName, key: data.key });\n    const request = getTransaction(db, storeName, 'readwrite')\n      .objectStore(storeName)\n      [res ? 'put' : 'add'](data);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n\n    request.onerror = function (event) {\n      console.warn('update data fail');\n      reject(event);\n    };\n  });\n\nexport const readStore = ({\n  db,\n  storeName,\n  key,\n  type = 'get'\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  key?: string | number;\n  type?: 'get' | 'getAll';\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName);\n    const objectStore = transaction.objectStore(storeName);\n    const request =\n      type === 'getAll' ? objectStore.getAll() : objectStore.get(key as string | number);\n\n    request.onerror = function (event) {\n      console.warn('read data fail');\n      reject(event);\n    };\n\n    request.onsuccess = function (event) {\n      if (request.result) {\n        resolve(request.result);\n      } else {\n        resolve(undefined);\n      }\n    };\n  });\n\nexport const removeStore = ({\n  db,\n  storeName,\n  key\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  key?: string | number;\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName, 'readwrite');\n    const objectStore = transaction.objectStore(storeName);\n    const request = objectStore.delete(key as string | number);\n\n    request.onsuccess = function (event) {\n      resolve(event);\n    };\n    request.onerror = function (event) {\n      console.warn('remove data fail');\n      reject(event);\n    };\n  });\n\nexport const getAllKeys = ({\n  db,\n  storeName\n}: {\n  db: IDBDatabase;\n  storeName: string;\n}): Promise<any> =>\n  new Promise((resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const transaction = getTransaction(db, storeName);\n    const objectStore = transaction.objectStore(storeName);\n    const request = objectStore.getAllKeys();\n\n    request.onsuccess = function (event) {\n      resolve(request.result);\n    };\n    request.onerror = function (event) {\n      console.warn('get all keys fail');\n      reject(event);\n    };\n  });\n\nexport type PageData = {\n  code: number;\n  total: number;\n  data: any[];\n};\n\nexport const getDataByPage = ({\n  db,\n  storeName,\n  pageNum,\n  pageSize = 10\n}: {\n  db: IDBDatabase;\n  storeName: string;\n  pageNum: number;\n  pageSize?: number;\n}): Promise<PageData> =>\n  new Promise(async (resolve, reject) => {\n    if (!db) reject('db is null');\n    if (!storeName) reject('storeName is null');\n    const allKeys: any[] = await getAllKeys({ db, storeName });\n    if (allKeys.length < 1) {\n      resolve({ code: 0, data: [], total: 0 });\n      return;\n    }\n    const transaction = getTransaction(db, storeName, 'readonly');\n    const objectStore = transaction.objectStore(storeName);\n    const count = pageSize || 10;\n    let keysList = [];\n    const allKeysReverse = allKeys.reverse();\n    for (let i = 0, len = allKeysReverse.length; i < len; i += count) {\n      keysList.push(allKeysReverse.slice(i, i + count));\n    }\n    const currentKeys = keysList[(pageNum || 1) - 1];\n    const start = Math.min(...currentKeys);\n    const end = Math.max(...currentKeys);\n    const boundKeyRange = IDBKeyRange.bound(start, end);\n    const rowData: any[] = [];\n    const request = objectStore.openCursor(boundKeyRange);\n    request.onsuccess = function (event: any) {\n      const cursor = event.target.result;\n      if (!cursor) {\n        resolve({ code: 0, total: allKeys.length, data: rowData.reverse() });\n        return;\n      }\n      rowData.push(cursor.value);\n      cursor.continue();\n    };\n    request.onerror = function (event) {\n      console.warn('read data fail');\n      reject({ code: 1, error: event });\n    };\n  });\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-02-23 22:57:35\n * @Last Modified by: qiuz\n */\n\nimport { isObject } from './is-type';\n\n/**\n * JSON字符串格式化，若解析失败返回原数据\n * @param str\n * @returns JSON String | str\n */\nexport const handleJsonStr = (str: string) => {\n  if (!str) return str;\n  let json = null;\n  try {\n    json = JSON.parse(str.replace(/(?:\\s*['\"]*)?([a-zA-Z0-9_-]+)(?:['\"]*\\s*)?:/g, '\"$1\":'));\n  } catch (error) {\n    console.log(error);\n  }\n  return json ? JSON.stringify(json, null, 4) : str;\n};\n\nexport const isJson = (str: string) => {\n  try {\n    return isObject(JSON.parse(str));\n  } catch (e) {\n    return false;\n  }\n};\n\nconst IS_SETUPED_SCRIPT: string[] = [];\nexport const setupScript = (src: string, crossorigin = ''): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    if (IS_SETUPED_SCRIPT.indexOf(src) > -1) {\n      resolve();\n      return;\n    }\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src;\n    script.crossOrigin = crossorigin;\n    script.onerror = (err: any) => {\n      console.log(err);\n      document.body.removeChild(script);\n      reject(new URIError(`The Script ${src} is no accessible.`));\n    };\n    script.onload = () => {\n      IS_SETUPED_SCRIPT.push(src);\n      resolve();\n    };\n    document.body.appendChild(script);\n  });\n};\n\nexport const filterObjectEmptyValue = (data: object | undefined) => {\n  if (!data) return {};\n  const result = {};\n  Object.keys(data).forEach((key: string) => {\n    data[key] !== null && data[key] !== undefined && (result[key] = data[key]);\n  });\n  return result;\n};\n\n/**\n * @description 数组切割分组\n * @param array\n * @param subGroupLength\n */\n export const arrayGroup = (array: any[], subGroupLength: number, fillItem?: any): any[] => {\n  const reslut = [];\n  for (let i = 0, len = array.length; i < len; i += subGroupLength) {\n    const group = array.slice(i, i + subGroupLength);\n    if (fillItem && group.length < subGroupLength) {\n      group.push(...new Array(subGroupLength - group.length).fill(fillItem));\n    }\n    reslut.push(group);\n  }\n  return reslut;\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-06-08 00:01:12\n * @Last Modified by: qiuz\n */\n\nimport { Resource } from 'service';\nimport { isArray, isObject, isString } from './is-type';\n\nexport const getRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    const res: any = await Resource.redis.get({ type: 'get', key }, {});\n    return isString(res) ? JSON.parse(res) : res;\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const setRedis = async (key: string, value: any): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  if (!value) {\n    console.error('val should be not null');\n    return Promise.reject();\n  }\n  const val = isObject(value) || isArray(value) ? JSON.stringify(value) : value.toString();\n  try {\n    return Resource.redis.post({ type: 'set' }, { data: { key, val } });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const delRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    return Resource.redis.get({ type: 'get', key });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n\nexport const existRedis = async (key: string): Promise<any> => {\n  if (!key) {\n    console.error('key should be not null');\n    return Promise.reject();\n  }\n  try {\n    return Resource.redis.get({ type: 'exists', key });\n  } catch (error) {\n    return console.log(error);\n  }\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2018-11-02 14:38:52\n * @Last Modified by: qiuz\n * @Last Modified time: 2022-02-26 18:00:42\n */\n\nimport 'whatwg-fetch';\nimport { filterObjectEmptyValue } from 'utils';\nimport { message as antdMsg } from 'antd';\n\nconst successCode = [0];\nconst exitFn = () => {\n  // const redirectTo = window.location.href;\n  // jump(`/admin/login?redirectTo=${encodeURIComponent(redirectTo)}`, { redirect: true });\n};\ninterface ConfigType {\n  loadingDelay?: number;\n  des?: boolean;\n  [propName: string]: any;\n}\n\nconst HEADER: any = {\n  headers: {\n    'Content-Type': 'application/json;charset=UTF-8'\n  }\n};\n\nconst fetchMethod = (_url: string, _config: any = {}) => {\n  return fetch(_url, { ...HEADER, ..._config })\n    .then((response) => {\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      return response.json().then(undefined, () => Promise.resolve(''));\n    })\n    .then((res: any) => {\n      const { config = {}, code, msg } = res;\n      const { dataKey = 'data' } = config;\n      const { directReturn = false } = _config;\n      if (directReturn) {\n        return Promise.resolve(res);\n      }\n      if (code === 401) {\n        exitFn();\n        return Promise.reject(res);\n      }\n      if (successCode.indexOf(code) > -1) {\n        return Promise.resolve(res[dataKey] || {});\n      }\n      antdMsg.error(msg || '系统异常');\n      return Promise.reject(res);\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nconst matchUrlSearchParams = (url: string, urlSearchParams: any) => {\n  if (!urlSearchParams) {\n    return url.replace(/\\/:[^?]+/g, '');\n  }\n  const u = new URLSearchParams();\n  // tslint:disable-next-line:variable-name\n  let _url = Object.keys(urlSearchParams).reduce((pre, next) => {\n    if (pre.includes(':' + next)) {\n      return pre.replace(':' + next, urlSearchParams[next]);\n    } else {\n      if (urlSearchParams[next] && urlSearchParams[next].constructor === Array) {\n        urlSearchParams[next].forEach((value: any) => {\n          u.append(next, value);\n        });\n      } else {\n        u.append(next, urlSearchParams[next]);\n      }\n      return pre;\n    }\n  }, url);\n  // let u = toQueryString(urlSearchParams);\n  _url = _url.replace(/\\/:[^?]+/g, '');\n  return _url + (u.toString() === '' ? '' : '?' + u);\n};\n\nclass FetchApi {\n  url = '';\n\n  constructor(_url: string) {\n    this.url = _url;\n  }\n\n  get = (urlSearchParams: object, bodyParams?: object, config?: ConfigType) => {\n    return fetchMethod(\n      matchUrlSearchParams(this.url, { ...urlSearchParams, ...bodyParams }),\n      config\n    );\n  };\n\n  post = (urlSearchParams?: object, bodyParams?: any, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'POST',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n\n  upload = (urlSearchParams: object, bodyParams: FormData) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      method: 'POST',\n      isUpoad: true,\n      body: bodyParams\n    });\n  };\n\n  delete = (urlSearchParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'DELETE'\n    });\n  };\n\n  put = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'PUT',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n\n  patch = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      ...config,\n      method: 'PATCH',\n      body: JSON.stringify(filterObjectEmptyValue(bodyParams))\n    });\n  };\n}\n\nconst Http = (url: string) => {\n  return new FetchApi(url);\n};\n\nexport default Http;\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-19 22:21:24\n * @Last Modified by: qiuz\n */\n\nimport HttpResource from './fetch';\n\nconst API_HOST = '';\n\nconst prefix = process.env.NODE_ENV === 'development' ? '' : '';\n\nexport const Resource = {\n  /**\n   * 上传\n   */\n  cdn: HttpResource(`${API_HOST}${prefix}/upload/:type`),\n  url: HttpResource(`${API_HOST}${prefix}/url/:type`),\n  /**\n   * redis\n   */\n  redis: HttpResource(`${API_HOST}${prefix}/redis/:type`),\n\n  /**\n   * doc\n   */\n  doc: HttpResource(`${API_HOST}${prefix}/:type`),\n\n  /**\n   * direct fetch\n   */\n  directFetch: HttpResource(`:type`)\n};\n"],"sourceRoot":""}